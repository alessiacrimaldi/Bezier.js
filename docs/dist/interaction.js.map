{"version":3,"file":"interaction.js","sources":["../../lib/interaction.js"],"sourcesContent":["export default function handleInteraction(cvs, curve, update) {\r\n    const ctx = cvs.getContext(\"2d\");\r\n    let isMoving = false,\r\n    mx = 0,\r\n    my = 0,\r\n    sx = 0,\r\n    sy = 0,\r\n    selectedPoint;\r\n\r\n    const points = curve.points;\r\n    const isMouseNearPoint = (p) => Math.abs(mx - p.x) < 10 && Math.abs(my - p.y) < 10\r\n\r\n    cvs.addEventListener(\"mousedown\", (e) => {\r\n        mx = e.offsetX;\r\n        my = e.offsetY;\r\n\r\n        points.forEach(p => {\r\n            if (isMouseNearPoint(p)) {\r\n                isMoving = true;\r\n                selectedPoint = p; // p: puntatore al punto della curva\r\n                sx = p.x;\r\n                sy = p.y;\r\n                return;\r\n            }\r\n        });\r\n    });\r\n\r\n    cvs.addEventListener(\"mousemove\", (e) => {\r\n        if (!isMoving) return;\r\n        // Aggiorna le coordinate del punto selezionato con le coordinate\r\n        // del mouse considerando l'offset iniziale.\r\n        // Essendo p un puntatore verso il punto selezionato (mosso), le\r\n        // coordinate del punto nella curva vengono aggiornate all'aggiornamento\r\n        // di selectedPoint\r\n        selectedPoint.x = sx + (e.offsetX - mx);\r\n        selectedPoint.y = sy + (e.offsetY - my);\r\n        curve.update();\r\n        ctx.clearRect(0, 0, cvs.width, cvs.height);\r\n        update();\r\n    });\r\n\r\n    cvs.addEventListener(\"mouseup\", (e) => {\r\n        isMoving = false;\r\n        selectedPoint = undefined;\r\n    });\r\n}"],"names":["handleInteraction","cvs","curve","update","ctx","isMoving","mx","my","sx","sy","selectedPoint","points","isMouseNearPoint","p"],"mappings":"AAAe,SAASA,EAAkBC,GAAKC,GAAOC,GAAQ;AAC1D,QAAMC,IAAMH,EAAI,WAAW,IAAI;AAC/B,MAAII,IAAW,IACfC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC;AAEA,QAAMC,IAAST,EAAM,QACfU,IAAmB,CAACC,MAAM,KAAK,IAAIP,IAAKO,EAAE,CAAC,IAAI,MAAM,KAAK,IAAIN,IAAKM,EAAE,CAAC,IAAI;AAEhF,EAAAZ,EAAI,iBAAiB,aAAa,CAAC,MAAM;AACrC,IAAAK,IAAK,EAAE,SACPC,IAAK,EAAE,SAEPI,EAAO,QAAQ,CAAAE,MAAK;AAChB,UAAID,EAAiBC,CAAC,GAAG;AACrB,QAAAR,IAAW,IACXK,IAAgBG,GAChBL,IAAKK,EAAE,GACPJ,IAAKI,EAAE;AACP;AAAA;AAAA,IAEhB,CAAS;AAAA,EACT,CAAK,GAEDZ,EAAI,iBAAiB,aAAa,CAAC,MAAM;AACrC,IAAKI,MAMLK,EAAc,IAAIF,KAAM,EAAE,UAAUF,IACpCI,EAAc,IAAID,KAAM,EAAE,UAAUF,IACpCL,EAAM,OAAM,GACZE,EAAI,UAAU,GAAG,GAAGH,EAAI,OAAOA,EAAI,MAAM,GACzCE;EACR,CAAK,GAEDF,EAAI,iBAAiB,WAAW,CAAC,MAAM;AACnC,IAAAI,IAAW,IACXK,IAAgB;AAAA,EACxB,CAAK;AACL;"}