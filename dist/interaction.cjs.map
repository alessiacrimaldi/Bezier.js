{"version":3,"file":"interaction.cjs","sources":["../lib/interaction.js"],"sourcesContent":["export default function handleInteraction(cvs, curve, update) {\r\n    let isMoving = false,\r\n    mx = 0,\r\n    my = 0,\r\n    sx = 0,\r\n    sy = 0,\r\n    selectedPoint;\r\n\r\n    const points = curve.points;\r\n    const isMouseNearPoint = (p) => Math.abs(mx - p.x) < 10 && Math.abs(my - p.y) < 10\r\n\r\n    cvs.addEventListener(\"mousedown\", (e) => {\r\n        mx = e.offsetX;\r\n        my = e.offsetY;\r\n\r\n        points.forEach(p => {\r\n            if (isMouseNearPoint(p)) {\r\n                isMoving = true;\r\n                selectedPoint = p; // p: puntatore al punto della curva\r\n                sx = p.x;\r\n                sy = p.y;\r\n                return;\r\n            }\r\n        });\r\n    });\r\n\r\n    cvs.addEventListener(\"mousemove\", (e) => {\r\n        if (!isMoving) return;\r\n        // Aggiorna le coordinate del punto selezionato con le coordinate\r\n        // del mouse considerando l'offset iniziale.\r\n        // Essendo p un puntatore verso il punto selezionato (mosso), le\r\n        // coordinate del punto nella curva vengono aggiornate all'aggiornamento\r\n        // di selectedPoint\r\n        selectedPoint.x = sx + (e.offsetX - mx);\r\n        selectedPoint.y = sy + (e.offsetY - my);\r\n        curve.update()\r\n        update()\r\n    });\r\n\r\n    cvs.addEventListener(\"mouseup\", (e) => {\r\n        isMoving = false;\r\n        selectedPoint = undefined;\r\n    });\r\n}"],"names":["handleInteraction","cvs","curve","update","isMoving","mx","my","sx","sy","selectedPoint","points","isMouseNearPoint","p"],"mappings":"aAAe,SAASA,EAAkBC,EAAKC,EAAOC,EAAQ,CAC1D,IAAIC,EAAW,GACfC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAEA,MAAMC,EAASR,EAAM,OACfS,EAAoBC,GAAM,KAAK,IAAIP,EAAKO,EAAE,CAAC,EAAI,IAAM,KAAK,IAAIN,EAAKM,EAAE,CAAC,EAAI,GAEhFX,EAAI,iBAAiB,YAAc,GAAM,CACrCI,EAAK,EAAE,QACPC,EAAK,EAAE,QAEPI,EAAO,QAAQE,GAAK,CAChB,GAAID,EAAiBC,CAAC,EAAG,CACrBR,EAAW,GACXK,EAAgBG,EAChBL,EAAKK,EAAE,EACPJ,EAAKI,EAAE,EACP,OAEhB,CAAS,CACT,CAAK,EAEDX,EAAI,iBAAiB,YAAc,GAAM,CAChCG,IAMLK,EAAc,EAAIF,GAAM,EAAE,QAAUF,GACpCI,EAAc,EAAID,GAAM,EAAE,QAAUF,GACpCJ,EAAM,OAAQ,EACdC,EAAQ,EAChB,CAAK,EAEDF,EAAI,iBAAiB,UAAY,GAAM,CACnCG,EAAW,GACXK,EAAgB,MACxB,CAAK,CACL"}